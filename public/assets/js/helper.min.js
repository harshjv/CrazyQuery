var route={init:"/api/init",skip:"/api/skip",answer:"/api/answer",finish:"/api/finish",clock:"/api/clock",track:"/api/track"};var createGraph=function(e){var c=[];c[0]="Start";e.unshift(0);e[0]=0;for(var b=1;b<e.length;b++){c[b]=b}var d={labels:c,datasets:[{fillColor:"#eee",strokeColor:"#16a085",pointColor:"#fff",pointStrokeColor:"#16a085",pointHighlightFill:"#555",pointHighlightStroke:"#16a085",data:e}]};var a=document.getElementById("canvas").getContext("2d");chart=new Chart(a).Line(d,{responsive:true,scaleShowGridLines:false,bezierCurve:true,pointDotStrokeWidth:2})};var shuffle=function(d){var c=d.length,b,a;while(0!==c){a=Math.floor(Math.random()*c);c-=1;b=d[c];d[c]=d[a];d[a]=b}return d};var suffix=function(b){var a=b%100;if(a>3&&a<21){return"th"}switch(a%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}};var doPost=function(b,a,c){$.post(b,a,function(d){if(d.redirect){window.location.assign(d.redirect)}else{if(b==route.init){if(d.question_number!=1){createGraph(d.question_track)}}if(b!=route.finish&&b!=route.clock&&b!=route.track){checkSkip(d);fillQuestion(d.question);fillData(d)}if(b==route.skip||b==route.answer){if(d.question_number==2){createGraph([d.score])}else{chart.addData([d.score],d.question_number-1)}}if(b==route.track){createGraph(d)}if(b==route.clock){$("#clock").timeTo({seconds:d,fontFamily:"inherit",callback:function(){disableOptions();doPost(route.finish)}})}if($.isFunction(c)){c(d)}}})};